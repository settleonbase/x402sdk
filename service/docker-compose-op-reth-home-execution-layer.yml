# 方案 B：execution-layer 同步模式
# 与 docker-compose-op-reth-home.yml 相同，仅 syncmode 改为 execution-layer
# 用于测试：让 reth 自行 P2P 同步，不依赖 op-node 的 newPayload
# 若仍无法同步，请采用方案 A（Base 官方 node）
#
# 使用方式：复制到服务器后
# docker compose -f docker-compose-op-reth-home-execution-layer.yml up -d

services:
  op-node:
    command:
      - "--network=base-mainnet"
      - "--l2=http://op-reth:8551"
      - "--l2.jwt-secret=/jwt/jwt.hex"
      - "--l2.enginekind=reth"
      - "--l1=http://host.docker.internal:8545"
      - "--l1.beacon=http://host.docker.internal:5052"
      - "--l1.beacon-fallbacks=https://ethereum-beacon-api.publicnode.com"
      - "--l1.max-concurrency=50"
      - "--l1.cache-size=1500"
      - "--l1.http-poll-interval=4s"
      - "--rpc.addr=0.0.0.0"
      - "--rpc.port=8549"
      - "--p2p.priv.path=/data/opnode_p2p_priv.txt"
      - "--p2p.discovery.path=/data/opnode_discovery_db"
      - "--p2p.peerstore.path=/data/opnode_peerstore_db"
      - "--p2p.listen.tcp=9222"
      - "--p2p.listen.udp=9222"
      - "--p2p.bootnodes=enr:-J24QNz9lbrKbN4iSmmjtnr7SjUMk4zB7f1krHZcTZx-JRKZd0kA2gjufUROD6T3sOWDVDnFJRvqBBo62zuF-hYCohOGAYiOoEyEgmlkgnY0gmlwhAPniryHb3BzdGFja4OFQgCJc2VjcDI1NmsxoQKNVFlCxh_B-716tTs-h1vMzZkSs1FTu_OYTNjgufplG4N0Y3CCJAaDdWRwgiQG,enr:-J24QH-f1wt99sfpHy4c0QJM-NfmsIfmlLAMMcgZCUEgKG_BBYFc6FwYgaMJMQN5dsRBJApIok0jFn-9CS842lGpLmqGAYiOoDRAgmlkgnY0gmlwhLhIgb2Hb3BzdGFja4OFQgCJc2VjcDI1NmsxoQJ9FTIv8B9myn1MWaC_2lJ-sMoeCDkusCsk4BYHjjCq04N0Y3CCJAaDdWRwgiQG,enr:-J24QDXyyxvQYsd0yfsN0cRr1lZ1N11zGTplMNlW4xNEc7LkPXh0NAJ9iSOVdRO95GPYAIc6xmyoCCG6_0JxdL3a0zaGAYiOoAjFgmlkgnY0gmlwhAPckbGHb3BzdGFja4OFQgCJc2VjcDI1NmsxoQJwoS7tzwxqXSyFL7g0JM-KWVbgvjfB8JA__T7yY_cYboN0Y3CCJAaDdWRwgiQG,enr:-J24QHmGyBwUZXIcsGYMaUqGGSl4CFdx9Tozu-vQCn5bHIQbR7On7dZbU61vYvfrJr30t0iahSqhc64J46MnUO2JvQaGAYiOoCKKgmlkgnY0gmlwhAPnCzSHb3BzdGFja4OFQgCJc2VjcDI1NmsxoQINc4fSijfbNIiGhcgvwjsjxVFJHUstK9L1T8OTKUjgloN0Y3CCJAaDdWRwgiQG,enr:-J24QG3ypT4xSu0gjb5PABCmVxZqBjVw9ca7pvsI8jl4KATYAnxBmfkaIuEqy9sKvDHKuNCsy57WwK9wTt2aQgcaDDyGAYiOoGAXgmlkgnY0gmlwhDbGmZaHb3BzdGFja4OFQgCJc2VjcDI1NmsxoQIeAK_--tcLEiu7HvoUlbV52MspE0uCocsx1f_rYvRenIN0Y3CCJAaDdWRwgiQG"
      - "--verifier.l1-confs=4"
      - "--rollup.load-protocol-versions=false"
      - "--l1.beacon.fetch-all-sidecars=true"
      - "--syncmode=execution-layer"
